20180609小测

似乎是猫锟给的不可做题呢......
真看不出这题哪里水来。

T1:

给你一堆边和每条边的经过次数，让你求出一些1-n的路径满足这些出现次数，要求线性复杂度。
显然我们以1为源点，n为汇点跑一次最大流，剩下的残量网络会是一堆各种各样的环，且存在流量的网络是一个DAG。
我们可以爆搜把环都找出来，然后找1-n的简单路径。
在简单路径上的任意一个点加一个环对路径是没有任何影响的。
于是我们可以在前几条路径上贪心加环。
但是，如果存在环套环的情况，且两个环与环跟简单路径都有且仅有部分相交的话，距离较远的那个环可能被忽略......
所以我选择把这样的环暴力缩成一个，用了set和vector，还有启发式合并，于是愉悦地T掉了两个点(还WA了一个是什么鬼)。
考虑我是不是制杖了，我们可以在n-1之间连上一条容量为1的出度的边，然后暴力找欧拉回路，最后切割换行即可。
欧拉回路怎么找？我们爆搜有容量的边，在回溯时输出这个点本身即可，这样(一点也不)显然是对的。

考场70分代码:

正解代码(为了好写我把边反向了):


T2:

一道类似于Thusc2018D1T2的题目......
如果已知一个串，求方案的话，显然贪心在尽可能前的位置匹配是最优的。
然后考虑正解，跨越的部分不好解决，我还想爆搜中间的字符(Thusc这样做有34分，竟没有FST)然后向外边拓展，发现要搜29个，GG。
第一个点直接快速幂，还有两个点能爆搜......然后我就滚粗了。
考虑正解，其实是从两边向中间拓展的......
我们建立正串的AC自动机和反串的AC自动机，然后存储两个自动机上的节点状态和位置，向内DP。
关于跨越的部分，我们直接求出反串AC自动机节点表示的前缀，取反放到正串的AC自动机上匹配就好了。
为什么这样是对的？因为跨越的部分左边一定是S中串的一个前缀，会被正串AC自动机上的节点表示，右边一定是S中串的一个后缀，也就是反串的一个前缀，也会被反串的AC自动机表示，如果能匹配的话，一定能被这样表示。这样正确性就有保证了。
复杂度？因为我们在这个DP这个阶段最多成功匹配1次，如果我们把这些串放入一个AC自动机中分析，那么匹配后一定存在一个节点是另一个节点跳过fail的状态，也就是说这样的节点二元组数量是O(30len)的，只需要写一个哈希就能AC啦。
(话说我用的unordered_map比猫锟手写哈希快)

考场30分代码:

正解代码:

T3:

显然在保证左边的情况下加油站越靠右越优。我们能写一个O(n^3)的暴力，由于是6s的时限，不需要卡常就能通过8分。
正解咕咕咕啦。

考场8分代码:

虽然又是Rank1了，可是题目依然不会做。
果然还是我太菜了啊。

ねぇ 今日のAきが明日ならば
呐 今天的连续若是明天
ねぇ Wらの日々もいつかがるの
呐 我们的日子何时才会相连
あぁ 叭榨辚互氓趣工敫幸に
啊 已经厌倦了每天重新设定的感觉
あぁ 色が褪せてしまいそうで嫌になる
啊 仿佛那样颜色就会褪去