2827: 千山鸟飞绝  非旋treap

国际惯例的题面:

看起来很不可做的样子，我们先来整理一下题意吧。
就是，维护每个点曾经拥有过的最大的两个属性值，支持把点的位置移动。
我们用map对每个位置进行离散化，对每个位置建立一个平衡树。为了方便分离，这个平衡树的关键字是节点编号。
然后把每个点当做一个节点，放进其所在位置的平衡树里。
剩下要做的就是平衡树分离出一个点，合并一个点，还有打标记了。
对于士气值的标记，我们维护平衡树中的max，每次合并的时候，用这个新点的威武值去给整棵树打标记，再用树中的max给这个新点打标记。
团结值的标记，合并后一起打就好了。另外其实我们不需要在平衡树上维护size的，再开个map维护下就好了。
最后查询的时候，为了让标记全部下放，我们强行把每个点都拆出来就行了。
非旋treap常数略大(可能我的姿势不是很正确QAQ)

代码:


hくても 届かなくても
即使已经远逝 已经无法传达
今宵、_かな簸蚩踏
今宵、仍然能刻画出一个真切的梦
始まりの朝 一人ぼっち同士のlかも
在新的早晨 让那些同样独身的沦落人
笑になってゆく
也能逐渐绽放出笑颜

カタチ取る この胸の中
将这情景在心中幻化成形
ずっと、いつでも描けるよう
一直、无论何时都能描绘出来
ささやかな嘘 さみしくないよ、なんて 微笑った
微微笑着说出一个小小的谎言 我并不寂寞哦
Lに eれるけど
在风中 依旧不变的摇曳着

常数巨大的我