20180418小测

老年Xm身败名裂

T1:
看到这种东西就想二维数点。
如果圆弧i和圆弧j能贡献答案的话(假设i在左边)，需要满足 Li<Lj && Ri<Rj && Lj<Ri && Coli!=Colj 。
我们先不管最后颜色的那个限制，如果我们确定了i之后，能有贡献的j需要满足: Li<Lj && Lj<Ri && Rj>Ri .
这样我们按照左端点建立主席树，把右端点插进去，就能统计了。
然后再按照颜色分类，计算颜色相同的贡献减去，就能得到答案。
复杂度O(sigma(Si^2)logn)，能获得70分。
正解大概是均衡不同复杂度算法之类的东西，然而并不能想到不同复杂度的算法(然后题解真是这样的)。
70分暴力代码:

T2:
全场就我不会做这题，高一学弟都会做......
我考虑枚举中间点，然后计算两遍有长度限制的大于/小于点数，发现并不可做，然后就O(n^2)暴力滚粗了。
正解是枚举右端点，计算中间点和左端点的贡献。
显然先要断环成链，我们用一颗权值线段树维护权值为i的点，左边比他小的点的个数fi。然后从左向右(n->2*n-1)枚举当前右端点，需要记录答案的就是sum(f1->f(in[i]-1))。
考虑怎么预处理出前n个点的区间的这个值，直接线段树求顺序对即可。
考虑怎么从区间[i,i+n-1]转移到区间[i+1,i+n]。显然对于权值>in[i]的所有点，其左边的点少了一个，应该区间-1。
考虑新加入的in[i+n]，所有的点都在他的左边，所以他的权值应该为in[i+n]-1。并且更新前权值为0(因为左边没有其他点)。
然后就是老年选手身败名裂的故事了。
60分暴力代码:
正解代码:

T3:
这不是BZOJ4774吗?斯坦纳树板子题。
写写写，和原来的代码对拍，发现要跑5s？
赶紧大力卡常，卡到3s，没办法了不管了(不知道评测机具体体位架构所以不敢target("avx"))。
然后发现这题竟然A了(震惊!1.5s竟然能让斯坦纳树AC)
然后又发现zhy的乱搞算法也A了(他枚举点对顺序然后贪心最短路，显然不对)，这数据是有多水？
辣鸡出题人不会造数据费我时间掉我排名！

代码:


话说我似乎是这个机房中历届存在过的常数最大的人了。
虽然我知道怎么优化，然而我懒......
于是就有了自带大常数的属性。
话说这不是萌点吗，怎么就变成槽点了(雾)。
我怎么知道......
